{
  "name": "groupme",
  "version": "0.5.4",
  "main": "index",
  "description": "A Node Module for interacting with the GroupMe API. Supports both querying the Stateless API and receiving Websocket-based push messages, and provides a CLI.",
  "keywords": [
    "groupme",
    "api",
    "text",
    "bot",
    "websocket",
    "push",
    "cli"
  ],
  "author": {
    "name": "Niels Joubert",
    "email": "njoubert@gmail.com",
    "url": "http://njoubert.com/"
  },
  "repository": {
    "type": "git",
    "url": "http://github.com/njoubert/node-groupme.git"
  },
  "bugs": {
    "url": "https://github.com/njoubert/node-groupme/issues"
  },
  "directories": {
    "lib": "./lib",
    "test": "./test"
  },
  "scripts": {
    "test": "node ./test/test.js"
  },
  "dependencies": {
    "websocket": "1.0.x",
    "request": "2.12.x",
    "q": "0.9.x",
    "mime": "1.x.x"
  },
  "devDependencies": {},
  "license": [
    {
      "type": "zlib",
      "url": "http://github.com/njoubert/node-groupme/blob/master/LICENSE"
    }
  ],
  "readme": "node-groupme\n============\n\nA [GroupMe v3 API](http://dev.groupme.com/docs/v3) Module for NodeJS.\n\nAvailable from NPM: `npm install groupme`\nhttps://npmjs.org/package/groupme\n\nFor known issues, see ISSUES.md file.\n\nThis supports all 3 parts of the GroupMe API:\n\n- The [Stateless API](http://dev.groupme.com/docs/v3)\n- The [Push API](http://dev.groupme.com/tutorials/push), a Websocket-based message pushing service \n- The [Image Service API](http://dev.groupme.com/docs/image_service), for uploading images to messages\n\nOne use case of this library is [building bots](http://dev.groupme.com/tutorials/bots).\n\nIf you are using this library, feel free to shoot me an email with any questions! Niels Joubert [njoubert@gmail.com](mailto:njoubert@gmail.com)\n\n## Getting Started\n\nThe GroupMe API is built upon the OAuth Implicit Autentication standard.\nThis means that once you have an access token for your application, you never have to reauthenticate or mess with usernames and passwords. The access token is bound to your specific username.\n\nFor this server-side library, we assume you're writing an app using your own account (aka on the server side). If you're writing an app that sits on a client, you have to go through an extra step to get that user's access token from your application's access token.\n\n#### Step 1: Obtain an Access Token.\n\nFirst, you register an application with GroupMe [here](http://dev.groupme.com/applications/new).\n\nOnce you've done this, you will have an access token string that you can now use to identify and authenticate yourself. You can copy this into your code directly:\n\n```javascript\nconst ACCESS_TOKEN = \"13a14310effe0130ee234ea2b99c2231\";\n```\n\nIf you want to act on the behalf of other users, you have to send them to your redirect url, also supplied by GroupMe. Once the user authenticates, they are routed back to your application with an access token for this user.\n\nAn example of this is beyond the scope of our introduction, but you can peruse [GroupMe's example](http://dev.groupme.com/) or the official RFC for [OAuth Implicit Grant](http://tools.ietf.org/html/rfc6749#section-4.2).\n\n#### Step 2: Get access to the stateless API\n\n```javascript\nvar API = require('groupme').Stateless\n```\n\n#### Step 3: Getting and posting data with the stateless API, using your Access Token\n\n```javascript    \nAPI.Users.me(ACCESS_TOKEN, function(err,ret) {\n  if (!err) {\n    console.log(\"Your user id is\", ret.id, \"and your name is\", ret.name);        \n  }\n});\n```\n## Using the Command Line Inteface to GroupMe\n\nA simple CLI interface to the GroupMe API is one of the examples. This is useful to prototype and test, since all the commands print out the raw JSON returned from GroupMe. See it in /examples/CommandLineInterface.  Simply run:\n\n```javascript\nnpm install .\nnode cli.js --help\n```\n\nThis depends on the excellent commander.js for command line option parsing.\n\n\n## Examples\n\nExamples live in the `/example` directory.\n\n*Examples require that you pass it an Access Token as a command line argument*\n\n#### HelloWorld\n\nThis example simply requests your username and user id, and prints out the groups you belong to.\n\n```javascript\nnode HelloWorld.js <ACCESS_TOKEN>\n```\n#### HelloBot\n\nThis example uses the IncomingStream API to monitor for a message containing the words \"@BOT\", and replies to that with a canned message.\n\nStep 1: Get info about your account, groups and bots\n\n```javascript\nnode HelloBot.js <ACCESS_TOKEN>\n```\n\nStep 2: Register a bot with GroupMe\n\n```javascript\nnode HelloBot.js <ACCESS_TOKEN> <USER_ID> <GROUP_ID> <BOT_NAME>\n```\n\nStep 3: Start the bot to listen for messages coming in, replying to the group it is registerd on\n\n```javascript\nnode HelloBot.js <ACCESS_TOKEN> <USER_ID> <BOT_ID>\n```\n#### PictureText\n\nThis example uploads an image to GroupMe's ImageService, which is then used to send a picture message.\n\nIt also demonstrates using EventEmitters to turn callback-based APIs into event-based APIs, a useful and alternative way to fight callback bloat.\n\nYou can use it to just upload an image:\n\n```javascript\nnode PictureText.js <ACCESS_TOKEN> <IMAGE_PATH>\n```\n\nOr you can use it to upload an image and post it as a message to a group:\n\n```javascript\nnode PictureText.js <ACCESS_TOKEN> <IMAGE_PATH> <GROUP_ID>\n```\n\n#### Command Line Interface.\n\nThis lets you query the stateless API from the command line.\n\n```\nnode cli.js --help\n\n  Usage: cli.js [options] [command]\n\n  Commands:\n\n    Groups.index           List the authenticated user's active groups.\n    Groups.former          List they groups you have left but can rejoin.\n    Groups.show            List a specific group.\n    Groups.create          Create a new group.\n    Groups.update          Update a group after creation.\n    Groups.destroy         Disband a group. This action is only available to the group creator.\n    Members.add            Add members to a group.\n    Members.results        Get the membership results from an add call.\n    Messages.index         Messages for a group. Return 20, can request before_id or after_id.\n    Messages.create        Send a message to a group.\n    Likes.create           Like a message.\n    Likes.destroy          Unlike a liked message.\n    Bots.create            Create a bot.\n    Bots.post              Post a message as a bot\n    Bots.index             List bots you have created\n    Bots.destroy           Remove a bot that you have created\n    Users.me               Get details about the authenticated user.\n\n  Options:\n\n    -h, --help               output usage information\n    -V, --version            output the version number\n    -a, --authtoken <token>  Set the auth token to use\n    -g, --group_id <id>      The group_id to use\n    -r, --results_id <id>    The results_id to use\n    -m, --message_id <id>    The message_id to use\n    -b, --bot_id <id>        The message_id to use\n    -n, --name <string>      The bot name to use\n    -t, --text <string>      The text to use for a bot message. Be sure to quote it!\n    -o, --opts <JSON>        supply a json object as options. Be sure to wrap it in double-quotes!\n```\n\nExample: Creating a bot\n\n```\nnode cli.js -a <ACCESSTOKEN> Bots.create --name \"My Bot\" --group_id <GROUPID>\n```\n\nExample: Creating a group\n\n```\nnode cli.js -a 02f19310adac0130ac394ea6b36c8247 Groups.create -o '{\"name\":\"testing\",\"description\":\"bookashala\"}' \n```\n\n#### Promises\n\n```javascript\nnode Promises.js <ACCESS_TOKEN>\n```\n\nThis prints out your group info, and shows how an error is handles.\n\nShows how to use the fantastic [Q promise library](http://documentup.com/kriskowal/q/) to wrap all the callback-based Stateless API functions and create a promise-based library.\n\nAll the functions in the stateless API is patched to have a .Q function hanging off it. We can use these functions to generate promises:\n\n```javascript\nAPI.Users.me.Q(ACCESS_TOKEN)\n    .then(function(da) { \n        return API.Groups.index.Q(ACCESS_TOKEN); \n    }).then(function(da) {\n        console.log(da);\n    });\n```\n\n\n\n## Development\n\nI welcome pull requests, emails, bug reports and the like. \n\nThat being said, this is not my full-time job. If you are using this as part of yours and want to take over as lead developer we can have that discussion.\n\n\n## Testing\n\nTests live in the `/test` directory. To run them, simply type: `node test.js ACCESS_TOKEN`.\n\nCurrently there is a set integration test of the entire Stateless API.\n\n## API Documentation\n\nThe code itself is fairly terse and well-commented, and is the best place to go for the full API, but here we stub out all the functionality for quick reference. \n\n### Stateless\n\nInclude it as follows: `var api = require('groupme').Stateless;`\n\nCallbacks follow the node.js standard: `function callback(error, data) {};`. If no error occurs, the `error` parameter is `null`.\n\n`Opts` are always optional, except for `api.Messages.create`, and consists of a JSON object.\n\n**Promises vs Callbacks:**\n\nThe default interface uses callbacks, but you can also use the Promise interface to every function, by calling `promise = func.Q()`. The parameters are exactly the same, except the last `callback` parameter from the original function is gone in the Promise-based version. See the Promise example and read the [Q documentation](http://documentup.com/kriskowal/q/).\n\n#### Groups\n\n\n* `Groups.index(access_token, callback)` List the authenticated user's active groups.\n* `Groups.former(access_token, callback)` List they groups you have left but can rejoin.\n* `Groups.show(access_token, group_id, callback)` Load a specific group.\n* `Groups.create(access_token, opts, callback)` Create a new group. \n    * Opts consists of `{name:,description:,mage_url:,share:}`\n* `Groups.update(access_token, group_id, opts, callback)` Update a group after creation. \n    * Opts consists of `{name:,description:,mage_url:,share:}`\n* `Groups.destroy(access_token, group_id, callback)` Disband a group. This action is only available to the group creator.\n\n\n#### Members\n\n* `Members.add(access_token, group_id, opts, callback)` Add members to a group.\n    * Opts consists of `{members: [{nickname:, user_id:, phone_number:, email: }, ...]}`\n* `Members.results(access_token, group_id, results_id, callback)` Get the membership results from an add call.\n\n\n#### Messages\n\n* `Messages.index(access_token, group_id, opts, callback)` Get messages for a group\n    * Opts consists of `{before_id:}` or `{after_id:}`\n* `Messages.create(access_token, group_id, opts, callback)`\n    * Opts here are required, and consists of `{message:{source_guid:, text:, attachments: [{type:\"image\", url:}, {type:\"location\", name:, lat, lng}, {type:\"split\", token:}, {type:\"emoji\", placeholder:, charmap:}]}}`\n\n\n#### Likes\n\n\n* `Likes.create(access_token, group_id, message_id, callback)` Like a message.\n* `Likes.destroy(access_token, group_id, message_id, callback)` Unlike a liked message.\n\n#### Bots\n\n* `Bots.create(access_token, name, group_id, opts, callback)` Create a bot. Associated with a specific name and group.\n    * Opts consists of `{avatar_url:, callback_url:}`\n* `Bots.post(access_token, bot_id, text, opts, callback)` Post a message as a bot.\n    * Opts cosists of `{picture_url:}`\n* `Bots.index(access_token, callback)` List bots you have created\n* `Bots.destroy(access_token, bot_id, callback)` Remove a bot that you have created\n\n#### Users\n\n* `Users.me(access_token, callback)` Get details about the authenticated user\n\n### IncomingStream\n\nThe IncomingStream is based around a PubSub message passing approach. It extends EventEmitter, and all the asynchronous push messages coming in from the server causes events to be fired.\n\n#### Initialization & Function Calls\n\n\n* `IncomingStream(access_token, userid, groupids)` - Constructs an IncomingStream for the given token and user_id. The optional groupids parameter is an array of group ids to receive in-progress notifications from.\n* `IncomingStream.connect()` - Starts the websocket connection process, handshakes with GroupMe\n* `IncomingStream.disconnect()` - Ends the websocket connection. Can `connect()` after this again.\n\nInclude the IncomingStream as follows:\n\n```javascript\n    var IncomingStream = require('groupme').IncomingStream;\n```\n\nYou can construct an IncomingStream for a given access token and user id, which will receive all messages sent to that user, regardless of group: \n\n```javascript\n    var iStream = new IncomingStream(ACCESS_TOKEN, USER_ID);\n```\n\nIf you want to receive typing-in-progress notifications for specific groups, you can supply an array of group ids:\n\n```javascript\n    var iStream = new IncomingStream(ACCESS_TOKEN, USER_ID, [GROUP_ID1, ...]);\n```\n\n#### Events\n\nRegister for events using `iStream.on(EVENT, CALLBACK);`\n\n\n* `connected` When the connection succeeds and is listening for messages.\n* `pending` When a connection is in progress\n* `disconnected` When a connection is dropped.\n* `message` Received a message from GroupMe, passing `(data)`, JSON from server\n* `error` when a failure occurs, passing `(message, payload)`\n* `status` For logging purposes, passing `(message, payload)`\n\n### ImageService\n\nIf you want to post images as part of messages or set your avatar, you need a URL to an image that's living on GroupMe's ImageService. This part of the API allows you to upload a raw png to GroupMe, and get a GroupMe ImageService URL back. This URL can then be used in subsequent messages and to set your avatar.\n\nThis uses the [node-mime](https://github.com/broofa/node-mime) library to determine the content-type of the file.\n\nInclude it:\n\n```javascript\nvar ImageService = require('groupme').ImageService;\n```\n\nUpload an image based on a path on your server:\n\n```javascript\nImageService.post(\n    IMAGE_PATH, \n        function(err,ret) {\n          if (err) {\n            console.log(err)\n          } else {\n            console.log(ret); \n          }\n        });\n```\n\n#### API\n\n* `post(path, callback)` Callback receives a JSON object with the `picture_url` of your upload.\n\n## ISSUES\n\nFor known issues, see ISSUES.md file.\n\n## LICENSE\n\nSee LICENSE file\n\n\n[![githalytics.com alpha](https://cruel-carlota.pagodabox.com/267fa65389e14ec58d75b5e995f9501b \"githalytics.com\")](http://githalytics.com/njoubert/node-groupme)",
  "readmeFilename": "README.md",
  "_id": "groupme@0.5.4",
  "_from": "groupme@latest"
}
